<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Growtopia Item Database</title>
	<style type="text/css">
		* {
			padding: 0;
			margin: 0;
		}

		body {
			font-family: 'Century Gothic', Century Gothic, AppleGothic, sans-serif;
			background-color: #ccc;
			margin: 1em;
		}

		.theHeader {

		}

		.theFooter {

		}

		.box {
			border: 0.3em solid blue;
			border-radius: 1em;
			background: #fff;
			padding: 1em;
			box-shadow: 0.3em 0.3em 1em -0.3em #000;
			margin-bottom: 1em;
		}
		.box:target {
			background: yellow;
		}

		.tableOfContents li {
			list-style: none;
		}

		.itemImage {
			display: inline-block;
			width: 32px;
			height: 32px;
			background: no-repeat url(http://vignette3.wikia.nocookie.net/growtopia/images/8/8f/ItemSprites.png/revision/latest?cb=20170303154729) white;
			float: left;
		}

		#itemInfoBoxes {
			display: flex;
			flex-wrap: wrap;
			justify-content: space-between;
			align-items: stretch;
			margin: -0.5em; /* To counter the margin on .itemInfoBox children */
		}

		.itemInfoBox {
			flex-grow: 1;
			margin: 0.5em;
			width: 25em;
		}

	</style>
</head>

<body>
	<header class="theHeader">
		<h1>Growtopia Item Database</h1>
		<p>An incomplete list of every item in the game and how to get it. Hopefully there will be more features later!</p>
		<p>And yes, I know this is SUPER UGLY. I'm a programmer not a designer. Be grateful it's not all magenta Comic Sans.</p>
	</header>

	<nav class="tableOfContents box">
		<h2>All items (<span id="itemCount"></span>)</h2>
		<ul id="itemsList"></ul>
	</nav>

	<section id="itemInfoBoxes"></section>

	<footer class="theFooter">Growtopia &copy; Copyright Ubisoft.</footer>

	<script type="text/javascript">

		var debugMode = true; // Enables various tests to check everything is valid. Can be disabled in release mode.
		var spriteSheetWidth = 32; // How many images wide is the spritesheet?
		var spriteWidth = 32,
			spriteHeight = 32;

		// NB: These are in any old order, we sort them later so they appear alphabetically.
		// But I'm starting off with SEEDIARY's info, so these are in the order they appear there!
		var items = {
			// GEN I
			"Dirt": {rarity: 1, spawnsInWorld: "normal", spriteIndex: 1},
			"Cave Background": {rarity: 1, spawnsInWorld: "normal", spriteIndex: 7},
			"Rock": {rarity: 1, spawnsInWorld: "normal", spriteIndex: 5},
			"Lava": {rarity: 1, spawnsInWorld: "normal", spriteIndex: 2},
			"Crystal Block": {rarity: 100, spawnsInEvent: "Beautiful Crystal"},
			"Sand": {rarity: 1, spawnsInWorld: "Beach Blast"},
			"Ocean Rock": {rarity: 1, spawnsInWorld: "Beach Blast"},
			"Garbage": {rarity: 1},
			"Sandstone Wall": {rarity: 1, spawnsInWorld: "Desert Blast"},
			"Boulder": {rarity: 1, spawnsInWorld: "Desert Blast"},
			"Obelisk": {rarity: 30, spawnsInWorld: "Desert Blast", spriteIndex: 487},
			// Gen II
			"Door": {rarity: 2, splice: ["Dirt", "Cave Background"], spriteIndex: 6},
			"Sign": {rarity: 2, splice: ["Rock", "Cave Background"], spriteIndex: 10},
			"Grass": {rarity: 2, splice: ["Rock", "Dirt"], spriteIndex: 8},
			"Wood Block": {rarity: 2, splice: ["Dirt", "Lava"]},
			"Glass Pane": {rarity: 2, splice: ["Rock", "Lava"], spriteIndex: 28},
			"Lava Rock": {rarity: 2, splice: ["Cave Background", "Lava"]},
			// GEN III
			"Daisy": {rarity: 3, splice: ["Grass", "Dirt"], spriteIndex: 11},
			"Rose": {rarity: 3, splice: ["Grass", "Lava"]},
			"Mushroom": {rarity: 3, splice: ["Grass", "Cave Background"]},
			"Bricks": {rarity: 3, splice: ["Grass", "Rock"]},
			"Rock Background": {rarity: 3, splice: ["Door", "Rock"]},
			"Wooden Background": {rarity: 4, splice: ["Door", "Grass"], spriteIndex: 26},
			"Wooden Platform": {rarity: 4, splice: ["Wood Block", "Grass"]},
			"Crappy Sign": {rarity: 3, splice: ["Door", "Dirt"], spriteIndex: 13},
			"Pointy Sign": {rarity: 4, splice: ["Door", "Sign"], spriteIndex: 12},
			"Super Crate Box": {rarity: 3, splice: ["Sign", "Dirt"]},
			"Amber Glass": {rarity: 3, splice: ["Glass Pane", "Dirt"]},
			"Happy Joy Plaque": {rarity: 3, splice: ["Door", "Cave Background"]},
			"Cargo Shorts": {rarity: 3, splice: ["Wood Block", "Dirt"]},
			"Torch": {rarity: 3, splice: ["Sign", "Lava"]},
			"Wheat": {rarity: 3, splice: ["Grass", "Sand"]},
			// GEN IV
			"Poppy": {rarity: 6, splice: ["Daisy", "Rose"]},
			"Brown Block": {rarity: 4, splice: ["Bricks", "Dirt"]},
			"Black Block": {rarity: 4, splice: ["Bricks", "Cave Background"]},
			"Grey Block": {rarity: 4, splice: ["Bricks", "Rock"]},
			"Red Block": {rarity: 4, splice: ["Bricks", "Lava"]},
			"Green Block": {rarity: 5, splice: ["Bricks", "Grass"]},
			"Yellow Block": {rarity: 6, splice: ["Bricks", "Daisy"]},
			"Aqua Block": {rarity: 5, splice: ["Bricks", "Glass Pane"]},
			"White Block": {rarity: 6, splice: ["Bricks", "Mushroom"]},
			"Danger Sign": {rarity: 5, splice: ["Pointy Sign", "Lava"], spriteIndex: 14},
			"Wooden Table": {rarity: 6, splice: ["Wooden Platform", "Wood Block"]},
			"Window": {rarity: 6, splice: ["Wooden Background", "Glass Pane"], spriteIndex: 27},
			"Flowery Wallpaper": {rarity: 7, splice: ["Wooden Background", "Daisy"]},
			"Mud Glob": {rarity: 4, splice: ["Daisy", "Dirt"]},
			"Tan Shirt": {rarity: 4, splice: ["Rock Background", "Dirt"]},
			"Stinky Socks": {rarity: 4, splice: ["Mushroom", "Dirt"]},
			"Shallot Mustache": {rarity: 5, splice: ["Mushroom", "Grass"]},
			"Messy Brown Hair": {rarity: 5, splice: ["Crappy Sign", "Grass"]},
			// GEN V
			"Orange Block": {rarity: 9, splice: ["Bricks", "Poppy"]},
			"Evil Bricks": {rarity: 5, splice: ["Black Block", "Lava"]},
			"Brick Background": {rarity: 7, splice: ["Black Block", "Bricks"]},
			"Stone Wall": {rarity: 5, splice: ["Grey Block", "Rock"]},
			"Dungeon Door": {rarity: 8, splice: ["Window", "Door"], spriteIndex: 15},
			"Toilet": {rarity: 7, splice: ["Brown Block", "Crappy Sign"]},
			"Bush": {rarity: 9, splice: ["Poppy", "Rose"]},
			"Wooden Window": {rarity: 10, splice: ["Window", "Wooden Background"], spriteIndex: 29},
			"Painting: Dink Duck": {rarity: 10, splice: ["Yellow Block", "Wooden Background"]},
			"Painting: Yerfdog": {rarity: 10, splice: ["White Block", "Wooden Background"]},
			"Death Spikes": {rarity: 8, splice: ["Danger Sign", "Rock Background"]},
			"Stripey Wallpaper": {rarity: 10, splice: ["Green Block", "Aqua Block"]},
			"Glass Block": {rarity: 7, splice: ["Glass Pane", "Aqua Block"]},
			"Brown Hair": {rarity: 5, splice: ["Brown Block", "Dirt"]},
			"Red Hair": {rarity: 6, splice: ["Red Block", "Grass"], spriteIndex: 22},
			"Green Shirt": {rarity: 7, splice: ["Green Block", "Grass"], spriteIndex: 18},
			"Jeans": {rarity: 6, splice: ["Aqua Block", "Rock"], spriteIndex: 24},
			"Brown Shoes": {rarity: 5, splice: ["Brown Block", "Cave Background"], spriteIndex: 20},
			"Biker Stache": {rarity: 6, splice: ["Brown Block", "Grass"]},
			"Boots": {rarity: 5, splice: ["Black Block", "Rock"], spriteIndex: 21},
			"Hot Head": {rarity: 5, splice: ["Red Block", "Lava"]},
			"Shades": {rarity: 6, splice: ["Black Block", "Glass Pane"], spriteIndex: 17},
			"Red Riding Hood": {rarity: 7, splice: ["Red Block", "Mushroom"]},
			"Blonde Bombshell": {rarity: 8, splice: ["Yellow Block", "Grass"]},
			"Long Brown Hair": {rarity: 8, splice: ["Wooden Table", "Grass"]},
			"Green Skirt": {rarity: 11, splice: ["Green Block", "Poppy"]},
			"Lovely Pink Dress": {rarity: 10, splice: ["Flowery Wallpaper", "Mushroom"]},
			"Flashlight": {rarity: 10, splice: ["Black Block", "Yellow Block"]},
			"X-Ray Specs": {rarity: 8, splice: ["White Block", "Glass Pane"]},
			"Referee Shirt": {rarity: 10, splice: ["White Block", "Black Block"]},
			"Rooster Hat": {rarity: 12, splice: ["White Block", "Yellow Block"]},
			"Cyclopean Visor": {rarity: 10, splice: ["Red Block", "Window"]},
			"Gold-Rimmed Glasses": {rarity: 12, splice: ["Yellow Block", "Window"]},
			"Top Hat": {rarity: 7, splice: ["Black Block", "Mushroom"]},
			"Tuxedo": {rarity: 7, splice: ["Grey Block", "Rose"], spriteIndex: 19},
			"Black Pants": {rarity: 6, splice: ["Black Block", "Door"]},
			"Santa Hat": {rarity: 10, splice: ["White Block", "Red Block"]},
			"Santa Vest": {rarity: 7, splice: ["White Block", "Lava"]},
			"Santa Pants": {rarity: 5, splice: ["Grey Block", "Lava"]},
			"Sheet Music: Blank": {rarity: 9, splice: ["White Block", "Super Crate Box"]},
			"Red Bricks": {rarity: 7, splice: ["Red Block", "Bricks"]},
			"Pencil": {rarity: 8, splice: ["Yellow Block", "Wood Block"]},
			"Worthless Rags": {rarity: 5, splice: ["Mud Glob", "Dirt"]},
			"Barn Block": {rarity: 7, splice: ["Red Block", "Super Crate Box"]},
			"Red Wood Wall": {rarity: 8, splice: ["Red Block", "Wooden Background"]},
			// GEN VI
			"Afro": {rarity: 13, splice: ["Bush", "Black Block"]},
			"Asbestos Boots": {rarity: 11, splice: ["Evil Bricks", "Yellow Block"]},
			"Barn Door": {rarity: 9, splice: ["Door", "Barn Block"]},
			"Barrel": {rarity: 11, splice: ["Dungeon Door", "Super Crate Box"]},
			"Baseball Cap": {rarity: 13, splice: ["Bush", "Wooden Platform"], spriteIndex: 23},
			"Bathtub": {rarity: 13, splice: ["Toilet", "White Block"]},
			"Big Old Sideways Arrow": {rarity: 13, splice: ["Orange Block", "Pointy Sign"]},
			"Biohazard Sign": {rarity: 14, splice: ["Orange Block", "Danger Sign"]},
			"Blueberry Bush": {rarity: 12, splice: ["Bush", "Mushroom"]},
			"Briefcase": {rarity: 14, splice: ["Stripey Wallpaper", "Brown Block"]},
			"Burglar Mask": {rarity: 8, splice: ["Brick Background", "Cave Background"]},
			"Cactus": {rarity: 17, splice: ["Death Spikes", "Bush"]},
			"Checker Wallpaper": {rarity: 11, splice: ["Evil Bricks", "Window"]},
			"Cuzco Wall Mount": {rarity: 18, splice: ["Painting: Yerfdog", "Dungeon Door"]},
			"Devil Horns": {rarity: 9, splice: ["Death Spikes", "Lava"]},
			"Dresser": {rarity: 14, splice: ["Dungeon Door", "Wooden Table"]},
			"Froghat": {rarity: 14, splice: ["Bush", "Aqua Block"]},
			"Gambler's Visor": {rarity: 12, splice: ["Glass Block", "Green Block"]},
			"Green Blouse": {rarity: 14, splice: ["Bush", "Green Block"]},
			"Grimstone": {rarity: 7, splice: ["Stone Wall", "Grass"]},
			"Hedge": {rarity: 8, rareWhenHarvesting: "Bush"},
			"House Entrance": {rarity: 10, splice: ["Dungeon Door", "Door"]},
			"Olde Timey Radio": {rarity: 15, splice: ["Toilet", "Dungeon Door"]},
			"Patent Leather Shoes": {rarity: 11, splice: ["Brick Background", "Grey Block"]},
			"Pigtails": {rarity: 12, splice: ["Daisy", "Orange Block"]},
			"Polka Dot Block": {rarity: 15, splice: ["Orange Block", "White Block"]},
			"Portcullis": {rarity: 16, splice: ["Death Spikes", "Dungeon Door"], spriteIndex: 30},
			"Red Coat": {rarity: 13, splice: ["Bush", "Red Block"]},
			"Sheet Music: Drums": {rarity: 13, splice: ["Sheet Music: Blank", "Brown Block"]},
			"Sheet Music: Piano Note": {rarity: 14, splice: ["Sheet Music: Blank", "Green Block"]},
			"Sidewalk": {rarity: 11, splice: ["Red Bricks", "Grey Block"]},
			"Spikey Hair": {rarity: 14, splice: ["Death Spikes", "Yellow Block"]},
			"Sword": {rarity: 11, splice: ["Death Spikes", "Rock Background"]},
			"Tomato": {rarity: 11, splice: ["Red Bricks", "Mud Glob"]},
			"Viking Helmet": {rarity: 9, splice: ["Stone Wall", "Pointy Sign"]},
			"Water Bucket": {rarity: 12, splice: ["Toilet", "Aqua Block"]},
			"White Beard": {rarity: 15, splice: ["Bush", "White Block"]},
			"Wooden Chair": {rarity: 11, splice: ["Toilet", "Wooden Platform"]},
		
			// Item of the Month
			"Golden Razor Wings": {itemOfTheMonth: {month: "March", year: 2017, cost: 100000}},

			// Weather Machines
			"Weather Machine - Sunny": {store: {section: "Weather Machines", cost: 1000}},
			"Weather Machine - Night": {store: {section: "Weather Machines", cost: 10000}},
			"Weather Machine - Arid": {store: {section: "Weather Machines", cost: 10000}},
			"Weather Machine - Rainy City": {store: {section: "Weather Machines", cost: 10000}},
			"Weather Machine - Warp Speed": {store: {section: "Weather Machines", cost: 10000}},
			"Mars Blast": {store: {section: "Weather Machines", cost: 15000}},
			"Thermonuclear Blast": {store: {section: "Weather Machines", cost: 15000}},
			"Undersea Blast": {store: {section: "Weather Machines", cost: 15000}},
			"Cave Blast": {store: {section: "Weather Machines", cost: 30000}},
			"Weather Machine - Stuff": {store: {section: "Weather Machines", cost: 50000}},

			// Growtokens
			"Challenge Timer": {tokenStore: 5},
			"Experience Potion": {tokenStore: 10},
			"Megaphone": {tokenStore: 10},
			"Derpy Star Block": {tokenStore: 30},
			"BLYoshi's Free Dirt": {tokenStore: 40},
			"Nothingness": {tokenStore: 50},
			"Spike Juice": {tokenStore: 60},
			"Doodad": {tokenStore: 75},
			"Crystal Cape": {tokenStore: 90},
			"Focused Eyes": {tokenStore: 100},
			"Grip Tape": {tokenStore: 100},
			"Night Vision Goggles": {tokenStore: 110},
			"Muddy Pants": {tokenStore: 125},
			"Cuddly Piranha": {tokenStore: 150},
			"Puddy Leash": {tokenStore: 180},
			"Golden Pickaxe": {tokenStore: 200},
			"Puppy Leash": {tokenStore: 200},
			"Digger's Spade": {tokenStore: 200},
		};

		function makeLinkID(name) {
			var regex = /\s/g;
			return name.replace(regex, "_");
		}

		function makeWikiLink(itemName) {
			var regex = /\s/g;
			return "http://growtopia.wikia.com/wiki/" + itemName.replace(regex, "_");
		}

		function findAllChildItems(parentItem, items) {
			var children = [];

			for (var itemName in items) {
				if (!items.hasOwnProperty(itemName)) continue;

				var item = items[itemName];
				if (item.splice && item.splice.includes(parentItem)) children.push(itemName);
			}

			return children;
		}

		var itemsList = document.getElementById("itemsList");
		var itemInfoBoxes = document.getElementById("itemInfoBoxes");
		var allNames = Object.keys(items);
		allNames.sort();

		document.getElementById("itemCount").innerText = allNames.length;

		for (var itemIndex in allNames) {
			var itemName = allNames[itemIndex];
			var item = items[itemName];
			var anchorName = makeLinkID(itemName);

			// TOC
			{
				var a = document.createElement("a");
				a.href = "#" + anchorName;
				a.innerText = itemName;
				var li = document.createElement("li");
				li.appendChild(a);
				itemsList.appendChild(li);
			}

			// Info box
			{
				var infoBox = document.createElement("div");
				infoBox.className = "itemInfoBox box";
				infoBox.id = anchorName;

				var itemHeading = document.createElement("h2");
				itemHeading.innerText = itemName;
				var anchor = document.createElement("a");
				anchor.href = "#" + anchorName;
				if (item.spriteIndex > 1) {
					var img = document.createElement("span");
					img.className = "itemImage";
					var spriteX = item.spriteIndex % spriteSheetWidth,
						spriteY = Math.floor(item.spriteIndex / spriteSheetWidth);
					img.style = "background-position: " + (-spriteWidth*spriteX) +"px " + (-spriteHeight*spriteY) + "px";
					anchor.appendChild(img);
				}
				anchor.appendChild(itemHeading);
				infoBox.appendChild(anchor);

				if (item.rarity) {
					var rarity = document.createElement("div");
					rarity.innerText = "Rarity: " + item.rarity;
					infoBox.appendChild(rarity);
				}

				var source = document.createElement("p");
				var sourceInfo = [];
				if (item.splice) {
					sourceInfo.push("Plant a " + itemName + " seed, or splice a "
					+ "<a href=\"#" + makeLinkID(item.splice[0]) + "\">" + item.splice[0] + "</a> seed with a "
					+ "<a href=\"#" + makeLinkID(item.splice[1]) + "\">" + item.splice[1] + "</a> seed.");
				}
				if (item.spawnsInWorld) {
					sourceInfo.push("Spawns naturally in new " + item.spawnsInWorld + " worlds.");
				}
				if (item.spawnsInEvent) {
					sourceInfo.push("Spawns in the '" + item.spawnsInEvent + "' special event.");
				}
				if (item.rareWhenHarvesting) {
					sourceInfo.push("Is a rare drop when harvesting <a href=\"#" + makeLinkID(item.rareWhenHarvesting) + "\">" + item.rareWhenHarvesting + "</a> trees.");
				}
				if (item.itemOfTheMonth) {
					sourceInfo.push("Was the <a href=\"https://growtopiagame.com/itemomonth.php\" target=\"_blank\">Item of the Month</a> in " + item.itemOfTheMonth.month + " " + item.itemOfTheMonth.year + ", available in the Store for " + item.itemOfTheMonth.cost + " gems.");
				}
				if (item.store) {
					sourceInfo.push("Available in the Store for " + item.store.cost + " gems, in the " + item.store.section + " section.");
				}
				if (item.tokenStore) {
					sourceInfo.push("Available in the Store for " + item.tokenStore + " Growtokens.");
				}
				source.innerHTML = sourceInfo.join("<br/>");
				infoBox.appendChild(source);

				// Where is this used?
				// This is a really really dumb check right now.
				// Probably makes more sense to put everything in a DB on a server rather than here, but oh well.
				var childItems = findAllChildItems(itemName, items);
				if (childItems.length > 0) {
					var usedToMake = document.createElement("h3");
					usedToMake.innerText = "Used to make:";
					infoBox.appendChild(usedToMake);
					var usedToMakeList = document.createElement("ul");
					for (var i = 0; i < childItems.length; i++) {
						var childName = childItems[i];

						var a = document.createElement("a");
						a.href = "#" + makeLinkID(childName);
						a.innerText = childName;
						var li = document.createElement("li");
						li.appendChild(a);
						usedToMakeList.appendChild(li);
					}

					infoBox.appendChild(usedToMakeList);
				}

				var wikiLink = document.createElement("a");
				wikiLink.href = makeWikiLink(itemName);
				wikiLink.target = "_blank";
				wikiLink.innerText = "View on Growtopia Wiki";
				infoBox.appendChild(wikiLink);

				itemInfoBoxes.appendChild(infoBox);
			}

			if (debugMode) {
				if (item.splice) {
					// Check splicing parent names
					var parent1 = items[item.splice[0]];
					var parent2 = items[item.splice[1]];

					if (!parent1) {
						console.error("Item", itemName, "parent item not found: ", item.splice[0]);
						continue;
					}
					if (!parent2) {
						console.error("Item", itemName, "parent item not found: ", item.splice[1]);
						continue;
					}

					// Check the rarities match!
					var targetRarity = parent1.rarity + parent2.rarity;
					if (item.rarity != targetRarity) {
						console.error("Rarities don't match up for item", itemName, "was", item.rarity, "sum of parents is", targetRarity);
					}
				}
			}
		}

	</script>
</body>
</html>