<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Growtopia Item Database</title>
</head>

<body>
	<h1>Growtopia Item Database</h1>

	<nav class="tableOfContents">
		<h2>All items</h2>
		<ul id="itemsList"></ul>
	</nav>

	<section id="itemInfoBoxes"></section>

	<script type="text/javascript">

		var debugMode = true; // Enables various tests to check everything is valid. Can be disabled in release mode.

		// NB: These are in any old order, we sort them later so they appear alphabetically.
		// But I'm starting off with SEEDIARY's info, so these are in the order they appear there!
		var items = {
			// Gen I
			"Dirt": {rarity: 1, spawnsInWorld: "normal"},
			"Cave Background": {rarity: 1, spawnsInWorld: "normal"},
			"Rock": {rarity: 1, spawnsInWorld: "normal"},
			"Lava": {rarity: 1, spawnsInWorld: "normal"},
			"Crystal Block": {rarity: 100, spawnsInEvent: "Beautiful Crystal"},
			"Sand": {rarity: 1, spawnsInWorld: "Beach Blast"},
			"Ocean Rock": {rarity: 1, spawnsInWorld: "Beach Blast"},
			"Garbage": {rarity: 1},
			"Sandstone Wall": {rarity: 1, spawnsInWorld: "Desert Blast"},
			"Boulder": {rarity: 1, spawnsInWorld: "Desert Blast"},
			"Obelisk": {rarity: 30, spawnsInWorld: "Desert Blast"},
			// Gen II
			"Door": {rarity: 2, splice: ["Dirt", "Cave Background"]},
			"Sign": {rarity: 2, splice: ["Rock", "Cave Background"]},
			"Grass": {rarity: 2, splice: ["Rock", "Dirt"]},
			"Wood Block": {rarity: 2, splice: ["Dirt", "Lava"]},
			"Glass Pane": {rarity: 2, splice: ["Rock", "Lava"]},
			"Lava Rock": {rarity: 2, splice: ["Cave Background", "Lava"]},
			// GEN III
			"Daisy": {rarity: 3, splice: ["Grass", "Dirt"]},
			"Rose": {rarity: 3, splice: ["Grass", "Lava"]},
			"Mushroom": {rarity: 3, splice: ["Grass", "Cave Background"]},
			"Bricks": {rarity: 3, splice: ["Grass", "Rock"]},
			"Rock Background": {rarity: 3, splice: ["Door", "Rock"]},
			"Wooden Background": {rarity: 4, splice: ["Door", "Grass"]},
			"Wooden Platform": {rarity: 4, splice: ["Wood Block", "Grass"]},
			"Crappy Sign": {rarity: 3, splice: ["Door", "Dirt"]},
			"Pointy Sign": {rarity: 4, splice: ["Door", "Sign"]},
			"Super Crate Box": {rarity: 3, splice: ["Sign", "Dirt"]},
			"Amber Glass": {rarity: 3, splice: ["Glass Pane", "Dirt"]},
			"Happy Joy Plaque": {rarity: 3, splice: ["Door", "Cave Background"]},
			"Cargo Shorts": {rarity: 3, splice: ["Wood Block", "Dirt"]},
			"Torch": {rarity: 3, splice: ["Sign", "Lava"]},
			"Wheat": {rarity: 3, splice: ["Grass", "Sand"]},
			// GEN IV
			"Poppy": {rarity: 6, splice: ["Daisy", "Rose"]},
			"Brown Block": {rarity: 4, splice: ["Bricks", "Dirt"]},
			"Black Block": {rarity: 4, splice: ["Bricks", "Cave Background"]},
			"Grey Block": {rarity: 4, splice: ["Bricks", "Rock"]},
			"Red Block": {rarity: 4, splice: ["Bricks", "Lava"]},
			"Green Block": {rarity: 5, splice: ["Bricks", "Grass"]},
			"Yellow Block": {rarity: 6, splice: ["Bricks", "Daisy"]},
			"Aqua Block": {rarity: 5, splice: ["Bricks", "Glass Pane"]},
			"White Block": {rarity: 6, splice: ["Bricks", "Mushroom"]},
			"Danger Sign": {rarity: 5, splice: ["Pointy Sign", "Lava"]},
			"Wooden Table": {rarity: 6, splice: ["Wooden Platform", "Wood Block"]},
			"Window": {rarity: 6, splice: ["Wooden Background", "Glass Pane"]},
			"Flowery Wallpaper": {rarity: 7, splice: ["Wooden Background", "Daisy"]},
			"Mud Glob": {rarity: 4, splice: ["Daisy", "Dirt"]},
			"Tan Shirt": {rarity: 4, splice: ["Rock Background", "Dirt"]},
			"Stinky Socks": {rarity: 4, splice: ["Mushroom", "Dirt"]},
			"Shallot Mustache": {rarity: 5, splice: ["Mushroom", "Grass"]},
			"Messy Brown Hair": {rarity: 5, splice: ["Crappy Sign", "Grass"]},
			// GEN V
			"Orange Block": {rarity: 9, splice: ["Bricks", "Poppy"]},
			"Evil Bricks": {rarity: 5, splice: ["Black Block", "Lava"]},
			"Brick Background": {rarity: 7, splice: ["Black Block", "Bricks"]},
			"Stone Wall": {rarity: 5, splice: ["Grey Block", "Rock"]},
			"Dungeon Door": {rarity: 8, splice: ["Window", "Door"]},
			"Toilet": {rarity: 7, splice: ["Brown Block", "Crappy Sign"]},
			"Bush": {rarity: 9, splice: ["Poppy", "Rose"]},
			"Wooden Window": {rarity: 10, splice: ["Window", "Wooden Background"]},
			"Painting: Dink Duck": {rarity: 10, splice: ["Yellow Block", "Wooden Background"]},
			"Painting: Yerfdog": {rarity: 10, splice: ["White Block", "Wooden Background"]},
			"Death Spikes": {rarity: 8, splice: ["Danger Sign", "Rock Background"]},
			"Stripey Wallpaper": {rarity: 10, splice: ["Green Block", "Aqua Block"]},
			"Glass Block": {rarity: 7, splice: ["Glass Pane", "Aqua Block"]},
			"Brown Hair": {rarity: 5, splice: ["Brown Block", "Dirt"]},
			"Red Hair": {rarity: 6, splice: ["Red Block", "Grass"]},
			"Green Shirt": {rarity: 7, splice: ["Green Block", "Grass"]},
			"Jeans": {rarity: 6, splice: ["Aqua Block", "Rock"]},
			"Brown Shoes": {rarity: 5, splice: ["Brown Block", "Cave Background"]},
			"Biker Stache": {rarity: 6, splice: ["Brown Block", "Grass"]},
			"Boots": {rarity: 5, splice: ["Black Block", "Rock"]},
			"Hot Head": {rarity: 5, splice: ["Red Block", "Lava"]},
			"Shades": {rarity: 6, splice: ["Black Block", "Glass Pane"]},
			"Red Riding Hood": {rarity: 7, splice: ["Red Block", "Mushroom"]},
			"Blonde Bombshell": {rarity: 8, splice: ["Yellow Block", "Grass"]},
			"Long Brown Hair": {rarity: 8, splice: ["Wooden Table", "Grass"]},
			"Green Skirt": {rarity: 11, splice: ["Green Block", "Poppy"]},
			"Lovely Pink Dress": {rarity: 10, splice: ["Flowery Wallpaper", "Mushroom"]},
			"Flashlight": {rarity: 10, splice: ["Black Block", "Yellow Block"]},
			"X-Ray Specs": {rarity: 8, splice: ["White Block", "Glass Pane"]},
			"Referee Shirt": {rarity: 10, splice: ["White Block", "Black Block"]},
			"Rooster Hat": {rarity: 12, splice: ["White Block", "Yellow Block"]},
			"Cyclopean Visor": {rarity: 10, splice: ["Red Block", "Window"]},
			"Gold-Rimmed Glasses": {rarity: 12, splice: ["Yellow Block", "Window"]},
			"Top Hat": {rarity: 7, splice: ["Black Block", "Mushroom"]},
			"Tuxedo": {rarity: 7, splice: ["Grey Block", "Rose"]},
			"Black Pants": {rarity: 6, splice: ["Black Block", "Door"]},
			"Santa Hat": {rarity: 10, splice: ["White Block", "Red Block"]},
			"Santa Vest": {rarity: 7, splice: ["White Block", "Lava"]},
			"Santa Pants": {rarity: 5, splice: ["Grey Block", "Lava"]},
			"Sheet Music: Blank": {rarity: 9, splice: ["White Block", "Super Crate Box"]},
			"Red Bricks": {rarity: 7, splice: ["Red Block", "Bricks"]},
			"Pencil": {rarity: 8, splice: ["Yellow Block", "Wood Block"]},
			"Worthless Rags": {rarity: 5, splice: ["Mud Glob", "Dirt"]},
			"Barn Block": {rarity: 7, splice: ["Red Block", "Super Crate Box"]},
			"Red Wood Wall": {rarity: 8, splice: ["Red Block", "Wooden Background"]},
			// GEN VI
			"Afro": {rarity: 13, splice: ["Bush", "Black Block"]},
			"Asbestos Boots": {rarity: 11, splice: ["Evil Bricks", "Yellow Block"]},
			"Barn Door": {rarity: 9, splice: ["Door", "Barn Block"]},
			"Barrel": {rarity: 11, splice: ["Dungeon Door", "Super Crate Box"]},
			"Baseball Cap": {rarity: 13, splice: ["Bush", "Wooden Platform"]},
			"Bathtub": {rarity: 13, splice: ["Toilet", "White Block"]},
			"Big Old Sideways Arrow": {rarity: 13, splice: ["Orange Block", "Pointy Sign"]},
			"Biohazard Sign": {rarity: 14, splice: ["Orange Block", "Danger Sign"]},
			"Blueberry Bush": {rarity: 12, splice: ["Bush", "Mushroom"]},
			"Briefcase": {rarity: 14, splice: ["Stripey Wallpaper", "Brown Block"]},
			"Burglar Mask": {rarity: 8, splice: ["Brick Background", "Cave Background"]},
			"Cactus": {rarity: 17, splice: ["Death Spikes", "Bush"]},
			"Checker Wallpaper": {rarity: 11, splice: ["Evil Bricks", "Window"]},
			"Cuzco Wall Mount": {rarity: 18, splice: ["Painting: Yerfdog", "Dungeon Door"]},
			"Devil Horns": {rarity: 9, splice: ["Death Spikes", "Lava"]},
			"Dresser": {rarity: 14, splice: ["Dungeon Door", "Wooden Table"]},
			"Froghat": {rarity: 14, splice: ["Bush", "Aqua Block"]},
			"Gambler's Visor": {rarity: 12, splice: ["Glass Block", "Green Block"]},
			"Green Blouse": {rarity: 14, splice: ["Bush", "Green Block"]},
			"Grimstone": {rarity: 7, splice: ["Stone Wall", "Grass"]},
			"Hedge": {rarity: 8, rareWhenHarvesting: "Bush"},
			"House Entrance": {rarity: 10, splice: ["Dungeon Door", "Door"]},
			"Olde Timey Radio": {rarity: 15, splice: ["Toilet", "Dungeon Door"]},
			"Patent Leather Shoes": {rarity: 11, splice: ["Brick Background", "Grey Block"]},
			"Pigtails": {rarity: 12, splice: ["Daisy", "Orange Block"]},
			"Polka Dot Block": {rarity: 15, splice: ["Orange Block", "White Block"]},
			"Portcullis": {rarity: 16, splice: ["Death Spikes", "Dungeon Door"]},
			"Red Coat": {rarity: 13, splice: ["Bush", "Red Block"]},
			"Sheet Music: Drums": {rarity: 13, splice: ["Sheet Music: Blank", "Brown Block"]},
			"Sheet Music: Piano Note": {rarity: 14, splice: ["Sheet Music: Blank", "Green Block"]},
			"Sidewalk": {rarity: 11, splice: ["Red Bricks", "Grey Block"]},
			"Spikey Hair": {rarity: 14, splice: ["Death Spikes", "Yellow Block"]},
			"Sword": {rarity: 11, splice: ["Death Spikes", "Rock Background"]},
			"Tomato": {rarity: 11, splice: ["Red Bricks", "Mud Glob"]},
			"Viking Helmet": {rarity: 9, splice: ["Stone Wall", "Pointy Sign"]},
			"Water Bucket": {rarity: 12, splice: ["Toilet", "Aqua Block"]},
			"White Beard": {rarity: 15, splice: ["Bush", "White Block"]},
			"Wooden Chair": {rarity: 11, splice: ["Toilet", "Wooden Platform"]},
			
		};

		function makeLinkID(name) {
			var regex = /\s/g;
			return name.replace(regex, "_");
		}

		function makeWikiLink(itemName) {
			var regex = /\s/g;
			return "http://growtopia.wikia.com/wiki/" + itemName.replace(regex, "_");
		}

		function findAllChildItems(parentItem, items) {
			var children = [];

			for (var itemName in items) {
				if (!items.hasOwnProperty(itemName)) continue;

				var item = items[itemName];
				if (item.splice && item.splice.includes(parentItem)) children.push(itemName);
			}

			return children;
		}

		var itemsList = document.getElementById("itemsList");
		var itemInfoBoxes = document.getElementById("itemInfoBoxes");
		var allNames = Object.keys(items);
		allNames.sort();

		for (var itemIndex in allNames) {
			var itemName = allNames[itemIndex];
			var item = items[itemName];
			var anchorName = makeLinkID(itemName);

			// TOC
			{
				var a = document.createElement("a");
				a.href = "#" + anchorName;
				a.innerText = itemName;
				var li = document.createElement("li");
				li.appendChild(a);
				itemsList.appendChild(li);
			}

			// Info box
			{
				var infoBox = document.createElement("div");
				infoBox.class = "itemInfoBox";

				var img = document.createElement("img");
				var itemHeading = document.createElement("h2");
				itemHeading.innerText = itemName;
				var anchor = document.createElement("a");
				anchor.id = anchorName;
				anchor.href = "#" + anchorName;
				anchor.appendChild(img);
				anchor.appendChild(itemHeading);
				infoBox.appendChild(anchor);

				var rarity = document.createElement("div");
				rarity.innerText = "Rarity: " + item.rarity;
				infoBox.appendChild(rarity);

				var source = document.createElement("p");
				if (item.splice) {
					source.innerHTML = "Plant a " + itemName + " seed, or splice a "
					+ "<a href=\"#" + makeLinkID(item.splice[0]) + "\">" + item.splice[0] + "</a> seed with a "
					+ "<a href=\"#" + makeLinkID(item.splice[1]) + "\">" + item.splice[1] + "</a> seed.";
				} else if (item.spawnsInWorld) {
					source.innerText = "Spawns naturally in new " + item.spawnsInWorld + " worlds."
				} else if (item.spawnsInEvent) {
					source.innerHTML = "Spawns in the '" + item.spawnsInEvent + "' special event."
				}
				infoBox.appendChild(source);

				var wikiLink = document.createElement("a");
				wikiLink.href = makeWikiLink(itemName);
				wikiLink.target = "_blank";
				wikiLink.innerText = "View on Growtopia Wiki";
				infoBox.appendChild(wikiLink);

				// Where is this used?
				// This is a really really dumb check right now.
				// Probably makes more sense to put everything in a DB on a server rather than here, but oh well.
				var childItems = findAllChildItems(itemName, items);
				if (childItems.length > 0) {
					var usedToMake = document.createElement("h3");
					usedToMake.innerText = "Used to make:";
					infoBox.appendChild(usedToMake);
					var usedToMakeList = document.createElement("ul");
					for (var i = 0; i < childItems.length; i++) {
						var childName = childItems[i];

						var a = document.createElement("a");
						a.href = "#" + makeLinkID(childName);
						a.innerText = childName;
						var li = document.createElement("li");
						li.appendChild(a);
						usedToMakeList.appendChild(li);
					}

					infoBox.appendChild(usedToMakeList);
				}

				itemInfoBoxes.appendChild(infoBox);
			}

			if (debugMode) {
				if (item.splice) {
					// Check splicing parent names
					var parent1 = items[item.splice[0]];
					var parent2 = items[item.splice[1]];

					if (!parent1) {
						console.error("Item", itemName, "parent item not found: ", item.splice[0]);
						continue;
					}
					if (!parent2) {
						console.error("Item", itemName, "parent item not found: ", item.splice[1]);
						continue;
					}

					// Check the rarities match!
					var targetRarity = parent1.rarity + parent2.rarity;
					if (item.rarity != targetRarity) {
						console.error("Rarities don't match up for item", itemName, "was", item.rarity, "sum of parents is", targetRarity);
					}
				}
			}
		}

	</script>
</body>
</html>